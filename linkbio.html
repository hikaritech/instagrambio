<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Velvet Glow Beauty â€¢ Link Bio</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --neutral-deepest: #3f3a35;   /* icon stroke */
    --neutral-deep: #5a544e;      /* darker stroke */
    --neutral-mid: #8b847d;       /* muted line */
    --neutral-warm: #b3aba2;      /* secondary text */
    --neutral-light: #d6cfc6;     /* circle bg */
    --neutral-pale: #ebe6df;      /* page section */
    --neutral-cream: #f5f2ed;     /* page bg */
    --neutral-soft: #faf8f5;      /* surface */
    --text-main: #4b4540;
    --text-muted: #9c958d;
  }


  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--brown-deepest);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    color: var(--text-light);
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 0;
    opacity: 0.6;
  }

  .container {
    width: 100%;
    max-width: 430px;
    min-height: 100vh;
    position: relative;
    z-index: 1;
    padding-bottom: 48px;
  }

  .hero-bg {
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 320px;
    background: radial-gradient(ellipse at 50% 0%, #5c3d2e 0%, #2d1a0e 50%, var(--brown-deepest) 100%);
    background-size: cover;
    background-position: center;
    z-index: -1;
  }

  .profile {
    text-align: center;
    padding: 48px 24px 24px;
    animation: fadeUp 0.7s ease both;
  }

  .avatar-wrap {
    width: 88px;
    height: 88px;
    margin: 0 auto 14px;
    position: relative;
  }

  .avatar-wrap::before {
    content: '';
    position: absolute;
    inset: -3px;
    border-radius: 50%;
    background: conic-gradient(var(--gold), var(--brown-light), var(--gold-light), var(--gold));
    animation: spin 4s linear infinite;
  }

  .avatar-inner {
    position: relative;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid var(--brown-deepest);
    background: var(--brown-mid);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
  }
  .avatar-inner img { width: 100%; height: 100%; object-fit: cover; }

  .store-name { font-family: 'Playfair Display', serif; font-size: 22px; font-weight: 600; letter-spacing: 0.5px; color: var(--brown-cream); margin-bottom: 4px; }
  .store-tagline { font-size: 12px; color: var(--text-muted); letter-spacing: 2px; text-transform: uppercase; font-weight: 300; }



  .search-wrap { padding: 0 20px 20px; animation: fadeUp 0.7s 0.1s ease both; }

  .search-box {
    display: flex;
    align-items: center;
    background: var(--brown-deepest);
    border: 1px solid rgba(201,169,110,0.3);
    border-radius: 14px;
    padding: 12px 16px;
    gap: 10px;
    backdrop-filter: blur(10px);
    transition: border-color 0.3s;
  }

  .search-box:focus-within { border-color: rgba(201,169,110,0.6); background: rgba(255,255,255,0.07); }

  .search-input {
    background: none; border: none; outline: none;
    color: var(--text-light); font-family: 'DM Sans', sans-serif;
    font-size: 14px; width: 100%; font-weight: 300;
  }
  .search-input::placeholder { color: var(--text-muted); }

  .search-toggle {
    display: flex; gap: 4px; margin-left: auto;
  }
  .search-toggle button {
    background: rgba(201,169,110,0.1); border: 1px solid rgba(201,169,110,0.2);
    border-radius: 8px; padding: 4px 8px; font-size: 9px; color: var(--text-muted);
    cursor: pointer; transition: all 0.2s; text-transform: uppercase; letter-spacing: 0.5px;
  }
  .search-toggle button.active {
    background: rgba(201,169,110,0.3); border-color: rgba(201,169,110,0.5); color: var(--gold);
  }

  .section-label {
    padding: 0 20px 14px;
    display: flex;
    align-items: center;
    gap: 10px;
    animation: fadeUp 0.7s 0.2s ease both;
  }
  .section-label span { font-family: 'Playfair Display', serif; font-size: 15px; color: var(--brown-pale); font-style: italic; white-space: nowrap; }
  .section-label::after { content: ''; flex: 1; height: 1px; background: linear-gradient(to right, rgba(201,169,110,0.3), transparent); }

  .product-grid { padding: 0 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

  .product-card {
    background: var(--brown-deepest);
    border: 1px solid rgba(201,169,110,0.25);
    border-radius: 18px;
    overflow: hidden;
    position: relative;
    cursor: pointer;
    transition: transform 0.3s ease, border-color 0.3s;
    animation: fadeUp 0.6s ease both;
    backdrop-filter: blur(10px);
  }
  .product-card.unavailable { opacity: 0.5; }
  .product-card:hover { transform: translateY(-3px); border-color: rgba(201,169,110,0.4); }
  .product-card.hidden { display: none; }

  .product-num {
    position: absolute; top: 10px; left: 10px;
    background: rgba(26,14,8,0.95); border: 1px solid var(--gold);
    border-radius: 8px; padding: 3px 8px; font-size: 11px;
    font-family: 'Playfair Display', serif; color: var(--neutral-light);
    z-index: 2; backdrop-filter: blur(4px);
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  }

  .product-badge {
    position: absolute; top: 10px; right: 10px;
    background: var(--gold); color: var(--brown-deepest);
    border-radius: 6px; padding: 3px 8px; font-size: 9px;
    font-weight: 700; font-family: 'DM Sans', sans-serif;
    letter-spacing: 0.8px; z-index: 2;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  }
  .product-badge.LIMITED { background: #e74c3c; color: #fff; }
  .product-badge.NEW { background: var(--gold-light); color: var(--brown-deepest); }

  .thumb-placeholder {
    width: 100%; aspect-ratio: 1/1;
    background: linear-gradient(135deg, var(--brown-mid), var(--brown-warm));
    display: flex; align-items: center; justify-content: center;
    font-size: 44px; position: relative; overflow: hidden;
  }
  .thumb-placeholder::after {
    content: ''; position: absolute; inset: 0;
    background: linear-gradient(to bottom, transparent 50%, rgba(26,14,8,0.6) 100%);
  }

  .thumb-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; display: block; }

  .product-info { padding: 10px 12px 12px; }
  .product-name { font-family: 'Playfair Display', serif; font-size: 13px; color: var(--brown-cream); font-weight: 600; margin-bottom: 2px; line-height: 1.3; }
  .product-sub { font-size: 10px; color: var(--text-muted); font-weight: 300; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.8px; }
  .product-price { font-size: 13px; color: var(--gold); font-weight: 500; display: flex; align-items: center; justify-content: space-between; }

  .btn-order {
    background: rgba(201,169,110,0.15); border: 1px solid rgba(201,169,110,0.3);
    border-radius: 7px; padding: 4px 8px; font-size: 9px; color: var(--gold-light);
    font-family: 'DM Sans', sans-serif; cursor: pointer;
    text-transform: uppercase; letter-spacing: 0.8px; transition: background 0.2s;
  }
  .btn-order:hover { background: rgba(201,169,110,0.3); }
  .btn-order:disabled { opacity: 0.4; cursor: not-allowed; }

  .empty-state {
    grid-column: span 2; text-align: center; padding: 40px 20px;
    color: var(--text-muted); font-family: 'Playfair Display', serif;
    font-style: italic; font-size: 14px; display: none;
  }

  /* Skeleton */
  .skeleton-card { background: rgba(92,61,46,0.2); border-radius: 18px; overflow: hidden; border: 1px solid rgba(201,169,110,0.08); }
  .skeleton-thumb { width: 100%; aspect-ratio: 1/1; background: linear-gradient(90deg, rgba(92,61,46,0.3) 25%, rgba(139,94,60,0.2) 50%, rgba(92,61,46,0.3) 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
  .skeleton-info { padding: 10px 12px 12px; }
  .skeleton-line { height: 10px; border-radius: 6px; background: rgba(92,61,46,0.3); margin-bottom: 6px; }
  .skeleton-line.short { width: 60%; }



  .socials { display: flex; justify-content: center; gap: 14px; margin-top: 24px; padding: 0 16px; animation: fadeUp 0.7s 0.5s ease both; }

  .social-btn {
    width: 44px; height: 44px; border-radius: 14px;
    background: var(--brown-deepest); border: 1px solid rgba(201,169,110,0.3);
    display: flex; align-items: center; justify-content: center;
    font-size: 18px; cursor: pointer; text-decoration: none; transition: all 0.3s;
    backdrop-filter: blur(10px);
  }
  .social-btn:hover { background: rgba(201,169,110,0.15); border-color: rgba(201,169,110,0.4); transform: translateY(-2px); }

  .footer-note { text-align: center; margin-top: 20px; font-size: 10px; color: rgba(184,152,128,0.4); letter-spacing: 1.5px; text-transform: uppercase; font-weight: 300; }

  .btn-show-more { background: var(--brown-deepest); border: 1px solid rgba(201,169,110,0.4); color: var(--gold); padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.3s; backdrop-filter: blur(10px); }
  .btn-show-more:hover { background: rgba(201,169,110,0.2); border-color: var(--gold); transform: translateY(-2px); }

  @keyframes shimmer { to { background-position: -200% 0; } }
  @keyframes fadeUp { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes spin { to { transform: rotate(360deg); } }
</style>
</head>
<body>

<div class="container">
  <div class="hero-bg"></div>

  <div class="profile" id="profileSection">
    <div class="avatar-wrap">
      <div class="avatar-inner">ğŸ’„</div>
    </div>
    <div class="store-name" id="storeName">â€”</div>
    <div class="store-tagline" id="storeTagline"></div>
  </div>

  <div class="search-wrap">
    <div class="search-box">
      <span style="color:var(--gold);font-size:16px;flex-shrink:0">ğŸ”</span>
      <input type="text" class="search-input" placeholder="Cari produk..." id="searchInput" oninput="filterProducts()">
      <div class="search-toggle">
        <button onclick="setSearchMode('name')" id="btnName" class="active">Nama</button>
        <button onclick="setSearchMode('number')" id="btnNumber">#No</button>
      </div>
    </div>
  </div>

  <div id="categoriesContainer"></div>



  <div class="socials" id="socialsRow"></div>
  <div class="footer-note" id="footerNote"></div>
</div>

<!-- Supabase SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
// â”€â”€ SUPABASE CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var supabaseClient = window.supabase.createClient(
  'https://obkxabxykdznsejywxgt.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ia3hhYnh5a2R6bnNlanl3eGd0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE0ODk3NjksImV4cCI6MjA4NzA2NTc2OX0.23alhIEzhAS68t4AWLI6x3qFJ5yPn1Mh5CV5W6ctLBE'
);

// â”€â”€ DEFAULT DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const DEFAULT_DATA = {
  "store": {
    "name": "Velvet Glow Beauty",
    "tagline": "Authentic Luxury Cosmetics",
    "whatsapp": "6281234567890",
    "avatar": "",
    "socials": {
      "instagram": "https://instagram.com/velvetglowbeauty",
      "tiktok": "https://tiktok.com/@velvetglowbeauty",
      "shopee": "https://shopee.co.id/velvetglowbeauty"
    }
  },
  "categories": [
    { "id": "lipstick", "label": "Koleksi Lipstick" }
  ],
  "products": [
    { "id": 1, "name": "Velvet Red Matte",  "category": "lipstick", "price": 89000, "emoji": "ğŸ”´", "image": "", "badge": "BESTSELLER", "available": true, "link": ""  },
    { "id": 2, "name": "Nude Rose Glam",    "category": "lipstick", "price": 95000, "emoji": "ğŸŒ¸", "image": "", "badge": "NEW",        "available": true, "link": ""  },
    { "id": 3, "name": "Berry Wine",        "category": "lipstick", "price": 89000, "emoji": "ğŸ·", "image": "", "badge": "",           "available": true, "link": ""  },
    { "id": 4, "name": "Peach Coral",       "category": "lipstick", "price": 85000, "emoji": "ğŸ‘", "image": "", "badge": "",           "available": true, "link": ""  },
    { "id": 5, "name": "Terracotta Earth",  "category": "lipstick", "price": 92000, "emoji": "ğŸ¤", "image": "", "badge": "LIMITED",    "available": true, "link": ""  },
    { "id": 6, "name": "Baby Doll Pink",    "category": "lipstick", "price": 88000, "emoji": "ğŸ’—", "image": "", "badge": "",           "available": false, "link": "" }
  ]
};

// Load data dari Supabase
async function loadData() {
  try {
    const { data, error } = await supabaseClient
      .from('store_data')
      .select('data')
      .eq('id', 1)
      .single();
    
    if (data && !error) return data.data;
    return DEFAULT_DATA;
  } catch { 
    return DEFAULT_DATA; 
  }
}

let DATA = DEFAULT_DATA;
let searchMode = 'name';

// â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const fmt = n => 'Rp ' + (n / 1000).toFixed(0) + 'K';

function setSearchMode(mode) {
  searchMode = mode;
  document.getElementById('btnName').classList.toggle('active', mode === 'name');
  document.getElementById('btnNumber').classList.toggle('active', mode === 'number');
  document.getElementById('searchInput').placeholder = mode === 'name' ? 'Cari produk...' : 'Cari nomor...';
  filterProducts();
}

// â”€â”€ RENDER STORE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderStore(s) {
  document.title = s.name + ' â€¢ Link Bio';
  document.getElementById('storeName').textContent = s.name;
  document.getElementById('storeTagline').textContent = s.tagline;

  const avatarEl = document.querySelector('.avatar-inner');
  if (s.avatar) {
    avatarEl.innerHTML = `<img src="${s.avatar}" alt="${s.name}">`;
  } else {
    avatarEl.textContent = 'ğŸ’„';
  }
  
  const heroBg = document.querySelector('.hero-bg');
  if (s.background) {
    heroBg.style.backgroundImage = `linear-gradient(180deg, rgba(26,14,8,0.7) 0%, var(--brown-deepest) 100%), url(${s.background})`;
  }

  const icons = { 
    instagram: '<svg width="20" height="20" viewBox="0 0 24 24" fill="#c9a96e"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>',
    tiktok: '<svg width="20" height="20" viewBox="0 0 24 24" fill="#c9a96e"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/></svg>',
    shopee: '<svg width="20" height="20" viewBox="0 0 24 24" fill="#c9a96e"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>'
  };
  document.getElementById('socialsRow').innerHTML =
    Object.entries(s.socials).map(([k, url]) =>
      `<a href="${url}" target="_blank" class="social-btn" title="${k}">${icons[k] || 'ğŸ”—'}</a>`
    ).join('');

  document.getElementById('footerNote').textContent = 'Â© 2026 ' + s.name;
}

// â”€â”€ RENDER PRODUCTS BY CATEGORY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderProductsByCategory() {
  const container = document.getElementById('categoriesContainer');
  container.innerHTML = '';

  DATA.categories.forEach(cat => {
    const catProducts = DATA.products.filter(p => p.category === cat.id);
    if (!catProducts.length) return;

    const section = document.createElement('div');
    section.style.marginBottom = '40px';
    
    section.innerHTML = `
      <div class="section-label" id="sectionLabel"><span>${cat.label}</span></div>
      <div class="product-grid" data-category="${cat.id}"></div>
      ${catProducts.length > 10 ? `<div style="text-align:center;margin-top:20px"><button class="btn-show-more" data-category="${cat.id}" onclick="toggleCategory('${cat.id}')">Lihat Lebih Banyak (${catProducts.length - 10})</button></div>` : ''}
    `;
    
    container.appendChild(section);
    renderCategoryProducts(cat.id, catProducts.slice(0, 10));
  });
}

function renderCategoryProducts(categoryId, products) {
  const grid = document.querySelector(`[data-category="${categoryId}"]`);
  
  products.forEach((p, i) => {
    const card = document.createElement('div');
    card.className = 'product-card' + (p.available ? '' : ' unavailable');
    card.dataset.name = p.name.toLowerCase();
    card.dataset.id = p.id;
    card.dataset.category = p.category;
    card.style.animationDelay = (i * 0.06) + 's';

    const thumb = p.image
      ? `<img class="thumb-img" src="${p.image}" alt="${p.name}" loading="lazy">`
      : `<div class="thumb-placeholder">${p.emoji}</div>`;

    const badge = p.badge
      ? `<div class="product-badge ${p.badge}">${p.badge}</div>` : '';

    const catLabel = DATA.categories.find(c => c.id === p.category)?.label || '';

    card.innerHTML = `
      <div class="product-num">#${String(p.id).padStart(2,'0')}</div>
      ${badge}${thumb}
      <div class="product-info">
        <div class="product-name">${p.name}</div>
        <div class="product-sub">${catLabel}</div>
        <button class="btn-order" ${p.available ? '' : 'disabled'} style="width:100%;margin-top:8px">${p.available ? 'Order' : 'Habis'}</button>
      </div>`;

    if (p.available && p.link) {
      card.onclick = () => window.open(p.link, '_blank');
    } else if (p.available) {
      card.onclick = () => orderWA(p);
    }
    grid.appendChild(card);
  });
}

function toggleCategory(categoryId) {
  const btn = document.querySelector(`[data-category="${categoryId}"].btn-show-more`);
  const grid = document.querySelector(`.product-grid[data-category="${categoryId}"]`);
  const allProducts = DATA.products.filter(p => p.category === categoryId);
  
  if (btn.dataset.expanded === 'true') {
    grid.innerHTML = '';
    renderCategoryProducts(categoryId, allProducts.slice(0, 10));
    btn.textContent = `Lihat Lebih Banyak (${allProducts.length - 10})`;
    btn.dataset.expanded = 'false';
  } else {
    grid.innerHTML = '';
    renderCategoryProducts(categoryId, allProducts);
    btn.textContent = 'Lihat Lebih Sedikit';
    btn.dataset.expanded = 'true';
  }
}

// â”€â”€ SEARCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function filterProducts() {
  const q = document.getElementById('searchInput').value.toLowerCase().trim();
  const cards = document.querySelectorAll('.product-card');
  const sections = document.querySelectorAll('#categoriesContainer > div');
  
  if (!q) {
    cards.forEach(c => c.classList.remove('hidden'));
    sections.forEach(s => s.style.display = 'block');
    return;
  }
  
  let totalVisible = 0;
  sections.forEach(section => {
    const sectionCards = section.querySelectorAll('.product-card');
    let sectionVisible = 0;
    
    sectionCards.forEach(c => {
      let match = false;
      if (searchMode === 'name') {
        match = c.dataset.name.includes(q);
      } else {
        match = c.dataset.id.includes(q);
      }
      c.classList.toggle('hidden', !match);
      if (match) { sectionVisible++; totalVisible++; }
    });
    
    section.style.display = sectionVisible > 0 ? 'block' : 'none';
  });
  
  if (totalVisible === 0) {
    let empty = document.querySelector('.empty-state');
    if (!empty) {
      empty = document.createElement('div');
      empty.className = 'empty-state';
      empty.style.display = 'block';
      empty.textContent = 'Produk tidak ditemukan...';
      document.getElementById('categoriesContainer').appendChild(empty);
    } else {
      empty.style.display = 'block';
    }
  } else {
    const empty = document.querySelector('.empty-state');
    if (empty) empty.style.display = 'none';
  }
}

// â”€â”€ ORDER VIA WA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function orderWA(p) {
  const msg = encodeURIComponent(
    `Halo! Saya mau order:\n\nğŸ’„ ${p.name}\n\nMohon konfirmasi stok ya ğŸ™`
  );
  window.open(`https://wa.me/${DATA.store.whatsapp}?text=${msg}`, '_blank');
}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showLoader() {
  document.body.insertAdjacentHTML('beforeend', '<div id="loader" style="position:fixed;inset:0;background:#1a0e08;display:flex;align-items:center;justify-content:center;z-index:9999;"><div style="text-align:center;"><div style="width:40px;height:40px;border:3px solid rgba(201,169,110,0.2);border-top-color:#c9a96e;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 12px;"></div><div style="color:#c9a96e;font-size:12px;letter-spacing:1px;">Loading...</div></div></div>');
}

function hideLoader() {
  const loader = document.getElementById('loader');
  if (loader) loader.remove();
}

(async function() {
  showLoader();
  DATA = await loadData();
  renderStore(DATA.store);
  renderProductsByCategory();
  hideLoader();
})();
</script>
</body>
</html>
